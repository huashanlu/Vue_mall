webpackJsonp([6],{343:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(355),a=s.n(r);for(var i in r)"default"!==i&&function(e){s.d(t,e,function(){return r[e]})}(i);var o=s(380),l=s(199),d=Object(l.a)(a.a,o.a,o.b,!1,null,null,null);d.options.__file="src\\components\\order\\order.vue",t.default=d.exports},355:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(201),a=s(202),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={data:function(){return{goodsList:[],order:{accept_name:"刘维",area:{province:{code:"440000",value:"广东省"},city:{code:"440300",value:"深圳市"},area:{code:"440306",value:"宝安区"}},address:"中粮商务公园3栋17楼",mobile:"18688888888",email:"wwdn7@vip.qq.com",post_code:"518000",payment_id:"6",express_id:"1",message:"请尽早发货，谢谢！",goodsids:"",cargoodsobj:{},goodsAmount:0,expressMoment:20},rules:{accept_name:[{required:!0,message:"收货人不能为空！",trigger:"blur"}],area:[{required:!0,message:"请选择所属地区！",trigger:"blur"}],address:[{required:!0,message:"请填写详细地址！",trigger:"blur"}],mobile:[{required:!0,validator:function(e,t,s){return t?/^1[3-9]\d{9}$/.test(t)?void s():s(new Error("手机号不合法")):s(new Error("年龄不能为空"))},trigger:"blur"}],email:[{required:!0,validator:function(e,t,s){var r=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(t&&!r.test(t))return s(new Error("邮箱格式不合法"));s()},trigger:"blur"}]}}},created:function(){this.getOrderList()},methods:{getOrderList:function(){var e=this,t=this.$route.params.ids;this.order.goodsids=t;var s="site/validate/order/getgoodslist/"+t;this.$axios.get(s).then(function(t){var s=(0,r.getLocalGoods)();t.data.message.forEach(function(t){t.buycount=s[t.id],e.order.cargoodsobj[t.id]=t.buycount}),e.goodsList=t.data.message})},afterSelectedArea:function(e){this.order.area=e},changeExpress:function(e){switch(this.order.express_id=e,e){case"1":this.order.expressMoment=20;break;case"2":this.order.expressMoment=10;break;case"3":this.order.expressMoment=8}},submitOrder:function(e){var t=this;this.$refs.order.validate(function(e){if(!e)return t.$message.error("请将订单信息填写完整后再提交！"),!1;t.$axios.post("site/validate/order/setorder",t.order).then(function(e){if(0===e.data.status){t.$router.push({path:"/site/payOrder/"+e.data.message.orderid});var s=t.$route.params.ids.split(",");t.$store.commit("deleteGoodsByIds",s)}else t.$message.error("订单提交失败，请稍候再试！")})})}},computed:{getTotalCount:function(){var e=0;return this.goodsList.forEach(function(t){e+=t.buycount}),e},getTotalAmount:function(){var e=this;return this.order.goodsAmount=0,this.goodsList.forEach(function(t){e.order.goodsAmount+=t.buycount*t.sell_price}),this.order.goodsAmount+this.order.expressMoment}},components:{VDistpicker:i.default}}},380:function(e,t,s){"use strict";s.d(t,"a",function(){return r}),s.d(t,"b",function(){return a});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),e._v(" "),s("div",{staticClass:"section"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"bg-wrap"},[e._m(1),e._v(" "),s("el-form",{ref:"order",staticClass:"cart-box",attrs:{model:e.order,rules:e.rules,"label-width":"150px"}},[s("h2",{staticClass:"slide-tit"},[s("span",[e._v("1、收货地址")])]),e._v(" "),s("div",{attrs:{id:"orderForm",name:"orderForm",url:""}},[s("div",{staticClass:"form-box address-info"},[s("el-form-item",{attrs:{label:"收货人姓名",prop:"accept_name"}},[s("el-input",{staticStyle:{width:"500px"},model:{value:e.order.accept_name,callback:function(t){e.$set(e.order,"accept_name",t)},expression:"order.accept_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所属地区",prop:"area"}},[s("v-distpicker",{attrs:{province:e.order.area.province.value,city:e.order.area.city.value,area:e.order.area.area.value},on:{selected:e.afterSelectedArea}})],1),e._v(" "),s("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[s("el-input",{staticStyle:{width:"500px"},model:{value:e.order.address,callback:function(t){e.$set(e.order,"address",t)},expression:"order.address"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[s("el-input",{staticStyle:{width:"500px"},model:{value:e.order.mobile,callback:function(t){e.$set(e.order,"mobile",t)},expression:"order.mobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[s("el-input",{staticStyle:{width:"500px"},model:{value:e.order.email,callback:function(t){e.$set(e.order,"email",t)},expression:"order.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮政编码",prop:"post_code"}},[s("el-input",{staticStyle:{width:"250px"},model:{value:e.order.post_code,callback:function(t){e.$set(e.order,"post_code",t)},expression:"order.post_code"}})],1)],1),e._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[e._v("2、支付方式")])]),e._v(" "),s("ul",{staticClass:"item-box clearfix"},[s("li",[s("label",[s("el-radio",{attrs:{label:"6"},model:{value:e.order.payment_id,callback:function(t){e.$set(e.order,"payment_id",t)},expression:"order.payment_id"}},[e._v("在线支付")]),e._v(" "),s("em",[e._v("手续费：0.00元")])],1)])]),e._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[e._v("3、配送方式")])]),e._v(" "),s("el-radio-group",{staticClass:"item-box clearfix",on:{change:e.changeExpress},model:{value:e.order.express_id,callback:function(t){e.$set(e.order,"express_id",t)},expression:"order.express_id"}},[s("li",[s("el-radio",{attrs:{label:"1"}},[e._v("顺丰快递(20元)")])],1),e._v(" "),s("li",[s("el-radio",{attrs:{label:"2"}},[e._v("圆通(10元)")])],1),e._v(" "),s("li",[s("el-radio",{attrs:{label:"3"}},[e._v("韵达(8元)")])],1)]),e._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[e._v("4、商品清单")])]),e._v(" "),s("div",{staticClass:"line15"}),e._v(" "),s("table",{staticClass:"cart-table",attrs:{width:"100%",border:"0",align:"center",cellpadding:"8",cellspacing:"0"}},[s("tbody",[s("tr",[s("th",{attrs:{colspan:"2",align:"left"}},[e._v("商品信息")]),e._v(" "),s("th",{attrs:{width:"84",align:"left"}},[e._v("单价")]),e._v(" "),s("th",{attrs:{width:"84",align:"center"}},[e._v("购买数量")]),e._v(" "),s("th",{attrs:{width:"104",align:"left"}},[e._v("金额(元)")])]),e._v(" "),e._l(e.goodsList,function(t){return s("tr",{key:t.id},[s("td",{attrs:{width:"68"}},[s("router-link",{attrs:{to:"/site/goodsInfo/"+t.id}},[s("img",{staticClass:"img",attrs:{src:t.img_url}})])],1),e._v(" "),s("td",[s("router-link",{attrs:{to:"/site/goodsInfo/"+t.id}},[e._v(e._s(t.title))])],1),e._v(" "),s("td",[s("span",{staticClass:"red"},[e._v("\n                      ￥"+e._s(t.sell_price)+"\n                    ")])]),e._v(" "),s("td",{attrs:{align:"center"}},[e._v(e._s(t.buycount))]),e._v(" "),s("td",[s("span",{staticClass:"red"},[e._v("\n                      ￥"+e._s(t.buycount*t.sell_price)+"\n                    ")])])])})],2)]),e._v(" "),s("div",{staticClass:"line15"}),e._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[e._v("5、结算信息")])]),e._v(" "),s("div",{staticClass:"buy-foot clearfix"},[s("div",{staticClass:"left-box"},[s("dl",[s("dt",[e._v("订单备注(100字符以内)")]),e._v(" "),s("dd",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.order.message,expression:"order.message"}],staticClass:"input",staticStyle:{height:"130px",width:"450px"},attrs:{name:"message"},domProps:{value:e.order.message},on:{input:function(t){t.target.composing||e.$set(e.order,"message",t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"right-box"},[s("p",[e._v("\n                  商品\n                  "),s("label",{staticClass:"price"},[e._v(e._s(e.getTotalCount))]),e._v(" 件     商品金额：￥\n                  "),s("label",{staticClass:"price",attrs:{id:"goodsAmount"}},[e._v(e._s(e.order.goodsAmount))]),e._v(" 元    \n                ")]),e._v(" "),s("p",[e._v("\n                  运费：￥\n                  "),s("label",{staticClass:"price",attrs:{id:"expressFee"}},[e._v(e._s(e.order.expressMoment))]),e._v(" 元\n                ")]),e._v(" "),s("p",{staticClass:"txt-box"},[e._v("\n                  应付总金额：￥\n                  "),s("label",{staticClass:"price",attrs:{id:"totalAmount"}},[e._v(e._s(e.getTotalAmount))])]),e._v(" "),s("p",{staticClass:"btn-box"},[s("router-link",{staticClass:"btn button",attrs:{to:"/site/shopping-cart",href:"javascript:;"}},[e._v("返回购物车")]),e._v(" "),s("a",{staticClass:"btn submit",on:{click:function(t){e.submitOrder(e.order)}}},[e._v("确认提交")])],1)])])],1)])],1)])])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"section"},[s("div",{staticClass:"location"},[s("span",[e._v("当前位置：")]),e._v(" "),s("a",{attrs:{href:"/index.html"}},[e._v("首页")]),e._v(" >\n      "),s("a",{attrs:{href:"/cart.html"}},[e._v("购物车")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cart-head clearfix"},[s("h2",[s("i",{staticClass:"iconfont icon-cart"}),e._v("我的购物车")]),e._v(" "),s("div",{staticClass:"cart-setp"},[s("ul",[s("li",{staticClass:"first active"},[s("div",{staticClass:"progress"},[s("span",[e._v("1")]),e._v("\n                  放进购物车\n                ")])]),e._v(" "),s("li",{staticClass:"active"},[s("div",{staticClass:"progress"},[s("span",[e._v("2")]),e._v("\n                  填写订单信息\n                ")])]),e._v(" "),s("li",{staticClass:"last"},[s("div",{staticClass:"progress"},[s("span",[e._v("3")]),e._v("\n                  支付/确认订单\n                ")])])])])])}];r._withStripped=!0}});